<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Clash QR</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Creepster&family=Bangers&display=swap');
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      background:linear-gradient(135deg,#8B0000,#FF4500);
      color:#FFD700;font-family:'Bangers',cursive;
      text-align:center;min-height:100vh;
      padding:20px;display:flex;flex-direction:column;
      align-items:center;justify-content:center;
    }
    .box{
      background:rgba(0,0,0,.7);border:4px solid #FFD700;
      border-radius:20px;padding:30px;max-width:400px;width:100%;
      box-shadow:0 0 20px #FF4500;
    }
    h1{font-family:'Creepster',cursive;font-size:2.5em;
       margin-bottom:20px;text-shadow:3px 3px 0 #8B0000;}
    p{margin:15px 0;font-size:1.1em;}
    input[type=text]{
      width:100%;padding:12px;margin:15px 0;
      border:3px solid #FFD700;border-radius:10px;
      background:#1a1a1a;color:#FFD700;text-align:center;
      font-size:1em;
    }
    button{
      background:#FFD700;color:#8B0000;border:none;
      padding:14px 30px;font-size:1.3em;
      font-family:'Bangers',cursive;border-radius:12px;
      cursor:pointer;margin:15px 0;
      box-shadow:0 4px 0 #b39700;transition:.2s;
    }
    button:active{transform:translateY(2px);box-shadow:0 2px 0 #b39700;}
    .qr{
      margin:25px auto;padding:15px;background:#fff;
      border-radius:15px;display:inline-block;
      box-shadow:0 0 15px rgba(255,215,0,.5);
    }
    .crown{font-size:2em;margin:10px 0;}
    .footer{margin-top:30px;font-size:.9em;color:#ff9966;}
  </style>
</head>
<body>
  <div class="box">
    <div class="crown">Crown</div>
    <h1>Clash QR</h1>
    <p>Paste your <strong>friend link</strong> → get a QR!</p>

    <!-- QR to open this site -->
    <div class="qr" id="site-qr"></div>
    <p><em>Scan to open the site</em></p>

    <input type="text" id="friendLink" placeholder="Paste friend link here..." />
    <button onclick="generate()">Generate My QR!</button>

    <div id="result" style="display:none; margin-top:20px;">
      <p><strong>Others scan this!</strong></p>
      <div class="qr" id="friend-qr"></div>
      <p id="showLink"></p>
    </div>

    <div class="footer">
      Made for Clash Royale Tournaments<br>
      No install • Just scan & add!
    </div>
  </div>

  <script>
    // 1. Show QR for the current page (works when hosted)
    const siteUrl = location.href;
    document.getElementById('site-qr').innerHTML = 
      `<img src="https://api.qrserver.com/v1/create-qr-code/?size=180x180&data=${encodeURIComponent(siteUrl)}">`;

    // 2. Generate friend QR using qrserver.com
    function generate() {
      const link = document.getElementById('friendLink').value.trim();
      if (!link) {
        alert('Please paste your Clash Royale friend link!');
        return;
      }

      const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=220x220&data=${encodeURIComponent(link)}`;
      document.getElementById('friend-qr').innerHTML = `<img src="${qrUrl}">`;
      document.getElementById('showLink').textContent = 
        link.length > 40 ? link.slice(0,40) + '...' : link;
      document.getElementById('result').style.display = 'block';
    }

    // Allow Enter key
    document.getElementById('friendLink').addEventListener('keypress', e => {
      if (e.key === 'Enter') generate();
    });
  </script>
</body>
</html>
